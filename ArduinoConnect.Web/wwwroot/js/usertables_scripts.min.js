function jsonToTable(n){var i="<tr><th>No.<\/th><th>Name<\/th><th>Type<\/th><th><\/th><\/tr>",t='<tr><td class="text-center" colspan="4"><button type="button" class="btn btn-primary" onclick="tableNewRow();">New<\/button><\/td><\/tr>',r,u,f;if(n==null||n==""){$("#tableSchemaTable").html(i+t);return}try{r=JSON.parse(n);$("#tableSchemaTable").html(i+t);u=2;Object.keys(r).forEach(function(n){tableNewRow();setRowValues(u,n,r[n]);u++})}catch(e){console.log("error: "+e);f='<tr><td colspan="4" class="text-center"><button onclick="clearScheme();" type="button" class="btn btn-danger">CLEAR SCHEME<\/button><span class="mx-3 text-danger font-weight-bold">ERROR!<\/span><button type="button" onclick="showRawScheme();" class="btn btn-danger">SHOW RAW<\/button><\/td><\/tr>';t="";$("#tableSchemaTable").html(i+f+t)}}function clearScheme(){$("#TableSchema").val("");jsonToTable(null)}function showRawScheme(){$("#TableSchema").removeAttr("hidden");$("#tableSchemaTable").attr("hidden")}function tableNewRow(){var n='<tr><td>#NUM#<\/td><td><input type="text" class="form-control" name="col-name-#NUM#"/><\/td><td><select class="form-control" name="col-type-#NUM#"><optgroup label="numeric"><option value="int">INT<\/option><option value="long">LONG<\/option><option value="float">FLOAT<\/option><option value="double">DOUBLE<\/option><\/optgroup><optgroup label="text"><option value="string">STRING<\/option><option value="char">CHAR<\/option><\/optgroup><optgroup label="date & time"><option value="datetime">DATETIME<\/option><option value="timestamp">TIMESTAMP<\/option><\/optgroup><optgroup label="other"><option value="bool">BOOL<\/option><option value="binary">BINARY<\/option><option value="array">ARRAY<\/option><option value="json">JSON<\/option><\/optgroup><\/select><\/td><td><button type="button" class="btn btn-danger" onclick="removeFromTable(#NUM#);"><i class="fa fa-times" aria-hidden="true"><\/i><\/button><\/td><\/tr>',i=$("#tableSchemaTable tr").length-1,t;n=n.replaceAll("#NUM#",i);t=$("#tableSchemaTable tr:last").index();$("#tableSchemaTable tr:nth-child("+t+")").after(n)}function setRowValues(n,t,i){$("#tableSchemaTable > tr:nth-child("+n+") > td:nth-child(2) > input").val(t);$("#tableSchemaTable > tr:nth-child("+n+") > td:nth-child(3) > select").val(i)}function removeFromTable(n){n++;$("#tableSchemaTable > tr:nth-child("+n+")").remove();for(let t=n;t<$("#tableSchemaTable tr").length;t++)$("#tableSchemaTable > tr:nth-child("+t+") > td:first-child").text(t-1),$('#tableSchemaTable input[name="col-name-'+t+'"]').attr("name","col-name-"+(t-1)),$('#tableSchemaTable select[name="col-type-'+t+'"]').attr("name","col-type-"+(t-1)),$("#tableSchemaTable tr:nth-child("+t+") button").attr("onclick","removeFromTable("+(t-1)+");")}$("#modalDelete").on("show.bs.modal",function(n){var t=$(n.relatedTarget),i=t.data("id");$("#modalDeleteId").val(i)});$("#addEditForm").submit(function(n){var i=!0,r={},t;$("#TableName").val($.trim($("#TableName").val()));$("#TableDescription").val($.trim($("#TableDescription").val()));$("#TableName").val()==""?($("#TableName").addClass("is-invalid"),i=!1):$("#TableName").removeClass("is-invalid");for(let n=1;n<$("#tableSchemaTable tr").length-1;n++)t=$('#tableSchemaTable input[name="col-name-'+n+'"]').val(),$('#tableSchemaTable input[name="col-name-'+n+'"]').val($.trim(t)),$.trim(t)==""||t in r?($('#tableSchemaTable input[name="col-name-'+n+'"]').addClass("is-invalid"),i=!1):($('#tableSchemaTable input[name="col-name-'+n+'"]').removeClass("is-invalid"),r[t]=$('#tableSchemaTable select[name="col-type-'+n+'"]').val());return i==!1?n.preventDefault():$("#TableSchema").val(JSON.stringify(r)),i});